# Diagnostic Rules Reference

This document lists all diagnostic rules provided by the Django Language Server.

> **Note:** This file is automatically generated from `diagnostics.toml`.
> Do not edit manually. To update rules, edit the TOML file instead.

## Template Parsing Errors (T-series)

These errors occur during the parsing phase of template processing.

### T100 - Parser Error

**Description:** Template syntax error encountered during parsing

This error occurs when the template parser encounters invalid Django template syntax.
Common causes include:
- Malformed template tags (e.g., missing closing braces)
- Invalid variable syntax
- Unclosed strings or comments
- Unexpected characters in template expressions

Example:
```django
{# This will cause a parser error
{{ variable | filter: invalid }}
```

---

### T900 - IO Error

**Description:** File system or I/O error while processing template

This error occurs when the language server encounters file system or I/O issues
while processing templates. Common causes include:
- Permission issues reading template files
- Missing or deleted template files
- File system access errors
- Network issues if templates are on remote storage

---

### T901 - Configuration Error

**Description:** Template configuration error

This error indicates a problem with the template configuration. Common causes include:
- Invalid settings in Django template configuration
- Misconfigured template loaders
- Issues with template directories
- Invalid template engine settings

---

## Semantic Validation Errors (S-series)

These errors are detected during semantic analysis of valid template syntax.

### S100 - Unclosed Tag

**Description:** Template tag is not properly closed

This error occurs when a template tag is opened but never closed. Django template
tags that require closing include blocks like `{% if %}`, `{% for %}`, `{% block %}`,
etc.

Example:
```django
{% if user.is_authenticated %}
    Welcome, {{ user.username }}!
{# Missing {% endif %} here
```

Fix:
```django
{% if user.is_authenticated %}
    Welcome, {{ user.username }}!
{% endif %}
```

---

### S101 - Unbalanced Structure

**Description:** Template structure has mismatched opening and closing tags

This error occurs when template block structures are not properly balanced. For example,
opening a block with `{% if %}` but closing with `{% endfor %}` instead of `{% endif %}`.

Example:
```django
{% if condition %}
    <div>Content</div>
{% endfor %}  {# Wrong closing tag! #}
```

Fix:
```django
{% if condition %}
    <div>Content</div>
{% endif %}
```

---

### S102 - Orphaned Tag

**Description:** Closing tag without corresponding opening tag

This error occurs when a closing tag appears without a matching opening tag. This
usually happens when:
- A closing tag is present but the opening tag is missing
- Tags are closed in the wrong order
- A closing tag appears in the wrong context

Example:
```django
<div>Content</div>
{% endif %}  {# No corresponding {% if %} #}
```

Fix:
```django
{% if condition %}
    <div>Content</div>
{% endif %}
```

---

### S103 - Unmatched Block Name

**Description:** endblock tag does not match any open block

This error occurs specifically with named blocks when the `{% endblock %}` tag
specifies a name that doesn't match any currently open block.

Example:
```django
{% block header %}
    <h1>Title</h1>
{% endblock footer %}  {# Name mismatch! #}
```

Fix:
```django
{% block header %}
    <h1>Title</h1>
{% endblock header %}
{# or simply #}
{% endblock %}
```

---

### S104 - Missing Required Arguments

**Description:** Template tag is missing required arguments

This error occurs when a template tag is called without all its required arguments.
Different Django template tags have different argument requirements.

Examples:
```django
{% extends %}  {# Missing template name #}
{% load %}     {# Missing library name #}
{% include %}  {# Missing template name #}
```

Fixes:
```django
{% extends "base.html" %}
{% load static %}
{% include "partials/header.html" %}
```

---

### S105 - Too Many Arguments

**Description:** Template tag received more arguments than expected

This error occurs when a template tag is called with more arguments than it accepts.
Each Django template tag has a specific signature defining the maximum number of
arguments it can receive.

Example:
```django
{% csrf_token extra_arg %}  {# csrf_token takes no arguments #}
{% now "Y-m-d" "extra" %}    {# now only takes one format string #}
```

Fix:
```django
{% csrf_token %}
{% now "Y-m-d" %}
```

Note: Some tags accept variable numbers of arguments using varargs. This error
only appears when you exceed the maximum even for varargs tags.

---

### S106 - Invalid Literal Argument

**Description:** Template tag argument must be a specific literal value

This error occurs when a template tag expects a specific literal keyword but receives
something else. Some Django tags require exact keyword matches at specific positions.

Example:
```django
{% for item on items %}  {# Should be 'in', not 'on' #}
    {{ item }}
{% endfor %}

{% if user is_not active %}  {# Should be 'not', not 'is_not' #}
    ...
{% endif %}
```

Fix:
```django
{% for item in items %}
    {{ item }}
{% endfor %}

{% if user is not active %}
    ...
{% endif %}
```

---

### S107 - Invalid Argument Choice

**Description:** Template tag argument must be one of a specific set of choices

This error occurs when a template tag argument must be one of a predefined set of
values, but receives something else. Unlike S106 which expects a single literal,
this applies when multiple valid options exist.

Example:
```django
{% cycle 'odd' 'even' as rowcolors silent=true %}  {# invalid; should be 'silent' without '=' #}

{% autoescape yes %}  {# valid #}
{% autoescape maybe %}  {# invalid - must be 'on' or 'off' #}
```

Fix:
```django
{% cycle 'odd' 'even' as rowcolors silent %}
{% autoescape on %}
```

---
